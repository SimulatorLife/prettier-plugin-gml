name: Codex 86 – KISS Sweeper

on:
  schedule:
    - cron: "10 */2 * * *" # every 2 hours at minute 10
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_codex-open-pr-and-ping.yml
    secrets: inherit
    with:
      pr_title: "Codex: KISS Sweeper"
      pr_body: |
        Seed PR inviting Codex to simplify one overengineered area and document the
        resulting regression coverage.
      prompt: >
        Locate one pocket of unnecessary complexity—an unused abstraction layer, a factory
        pattern used only once, or a redundant configuration toggle. Replace it with the
        simplest implementation that preserves behavior while improving readability.

        Requirements:
          • Include a before/after complexity discussion in the PR body explaining why the
            simplification is safe and beneficial.
          • Add or update regression tests that exercise the simplified path so future
            contributors have confidence in the leaner design.
          • Keep the change narrowly scoped to related modules and avoid deleting extension
            points that are still in use.
          • Run tests, lint, and formatting checks before opening the PR and report the
            results.

        If nothing merits simplification, summarize the review in the PR body and leave
        suggestions for future sweeps instead of forcing churn.
