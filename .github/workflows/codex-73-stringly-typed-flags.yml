name: Codex 73 â€“ Stringly Typed Flags
on:
  repository_dispatch:
    types: [run_scheduled]
  - cron: "45 8 5-31/2 * *"  # every 2 days at 08:45 (days 5,7,...)
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    if: ${{ (github.event_name == 'workflow_dispatch' || (github.event_name == 'repository_dispatch' && github.event.action == 'run_scheduled' && github.event.client_payload.workflow_file == '.github/workflows/codex-73-stringly-typed-flags.yml')) }}
    uses: ./.github/workflows/_codex-open-pr-and-ping.yml
    secrets: inherit
    with:
      pr_title: "Codex: Stringly Typed Flags"
      pr_body: >
        Seed PR for Codex to replace a brittle magic string flag with a safer
        enum/constant approach and validation.
      prompt: >
        Locate code that branches on raw string literals to determine behaviour.
        Introduce a typed alternative (enum object, constant map, schema) that
        centralises valid values, validates inputs, and updates call sites. Add
        regression coverage showing that invalid strings now fail fast while
        valid ones keep working. Limit the change to one representative flag or
        option to keep the diff focused.
