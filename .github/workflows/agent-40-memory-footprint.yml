name: Agent 40 â€“ Memory Footprint Control
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Memory Footprint Control"
      prompt: >
        Audit allocation-heavy paths (e.g. cached lookup tables, unintended global variables, 
        misused closures, unbounded caches, not releasing memory when not needed anymore, 
        etc.) and locate one clear case of avoidable memory growth or churn. Apply a 
        localized fix that cuts peak or steady-state usage (e.g., reuse buffers, trim stored 
        state, clear references promptly) while maintaining deterministic updates and correct 
        behavior. Include a reproducible measurement (heap snapshot, allocation counter, 
        Resident Set Size) demonstrating the reduction.
