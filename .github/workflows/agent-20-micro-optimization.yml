name: Agent 20 â€“ Targeted Micro-Optimization
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Targeted Micro-Optimization"
      prompt: >
        Identify and optimize one specific micro-hot path (a tight loop, inner
        render/update step, or small utility on a critical code path) and deliver at
        least one measurable, behavior-preserving micro-optimization. Keep the
        blast radius tiny: no architectural rewrites, no API/interface changes, no new
        dependencies. Prefer straightforward optimizations such as reducing allocations,
        tightening iteration, avoiding repeated lookups inside loops, hoisting
        constants, caching small computed values, replacing polymorphic branches with
        predictable ones, simplifying data shapes, reducing string concatenations/JSON
        operations, collapsing nested conditionals into guard clauses, or
        short-circuiting common cases. In your commit message, include a small
        before/after measurement (micro-benchmark, timing probe, or deterministic
        counter) to show impact.
