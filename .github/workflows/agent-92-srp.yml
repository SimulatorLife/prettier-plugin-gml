name: "Agent 92 â€“ Single Responsibility Guardrail"

on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Single Responsibility Sweep"
      prompt: >
        Run a repository-wide guardrail pass to enforce the single-responsibility
        principle. Identify one function whose body is extremely long
        (not including comments and blank lines) and whose name clearly strings 
        together multiple verb stems.
        Explain why the current implementation violates SRP, then propose and
        implement/reuse helper extraction(s) so that each resulting function owns a
        single change-triggering responsibility. Keep public APIs stable,
        preserve tests, and update documentation if behaviour shifts. If no
        candidate qualifies, document the audit findings and outline a follow-up
        plan instead of forcing changes.
