name: Codex 97 – CLI Hot Reload Integration

on:
  repository_dispatch:
    types: [run_scheduled]
  - cron: "5 4/5 * * *" # Every 5 hours starting at 04:05 UTC (offset ~4 hours)
  workflow_dispatch: {}

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    if: ${{ (github.event_name == 'workflow_dispatch' || (github.event_name == 'repository_dispatch' && github.event.action == 'run_scheduled' && github.event.client_payload.workflow_file == '.github/workflows/codex-97-hot-cli.yml')) }}
    uses: ./.github/workflows/_codex-hot-feature-base.yml
    secrets: inherit
    with:
      component: "CLI orchestration (src/cli)"
      extra_context: >
        Focus on developing the CLI for the hot reload pipeline—watch mode coordination, transpiler,
        semantic refreshes, refactor triggers, and runtime wrapper patch streaming. Prefer
        small, end-to-end improvements with strong tests and documentation updates where the
        commands evolve.
