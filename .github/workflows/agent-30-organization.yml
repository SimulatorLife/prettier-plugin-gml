name: Agent 30 – Project Organization

on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Project Organization Sweep"
      pr_body: "Seed PR for Agent to relocate one function, module, or asset to a more coherent home and tidy references while preserving inline documentation."
      prompt: >
        Perform a focused organization pass. Locate one function, module, or file/asset that
        currently lives in an ill-fitting directory or file (e.g., UI helper in core
        logic, event utilities outside `src/events`, math helpers outside `src/math`).
        Justify why the current placement is suboptimal, then move it to the more
        logical location.

        Requirements:
          • Update all imports/exports so the project builds and tests still pass.
          • Maintain architectural boundaries—keep parser, compiler, functional
            test code, performance testing code, and plugin code separate.
          • When moving code, ensure barrel files/index exports remain consistent, update
            documentation and comments referencing the old location, and adjust tests or
            fixtures. Preserve existing inline code comments and function docstrings so
            context is not lost during the move.
          • Include a short summary in the commit message explaining the original location, the
            new location, and the rationale.
          • If no valid candidate is found, document why in the commit message and propose a
            future reorganization plan.

        Avoid pure renames with no location change, avoid wide-scope refactors, and do
        not introduce new dependencies. Keep the change narrowly focused but complete for
        the chosen item.
