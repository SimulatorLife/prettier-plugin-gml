name: "Agent 09 - Dependency Hygiene"
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Dependency Hygiene"
      prompt: >
        Audit package.json (and the lockfile) for outdated, unused, or redundant
        dependencies. Remove packages that are no longer referenced, collapse duplicate
        entries, align semver ranges with project policy, and upgrade to supported
        versions when it is safe. Replace deprecated APIs with their modern
        equivalents, adjust imports/usages accordingly, and document notable version
        jumps in the commit message. Skip tooling/config changesâ€”those live in the
        configuration workflow. Keep the diff tight, avoid introducing new heavy
        dependencies, and ensure builds and tests still succeed after the cleanup.
