name: Agent 06 – Decouple Architecture
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Decouple Architecture"
      prompt: >
        Review the architecture and select ONE overly coupled area (a module cluster,
        package, or dependency cycle) that, if refactored, will materially improve
        modularity. Briefly justify the choice, then decouple that area by separating
        concerns, reducing circular dependencies, and introducing clearer boundaries
        (interfaces/facades) only where necessary—avoid over-engineering. Update
        imports/usages accordingly, keep the diff small and behavior-preserving, and run
        formatters/linters/tests to ensure no regressions. The goal for this run is a
        focused, maintainable restructuring that supports future growth while reducing
        technical debt.
