name: "Agent 93 – Refactor Engine Enhancements"

on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-hot-feature-base.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      component: "refactor engine (src/refactor)"
      extra_context: >
        Focus on expanding semantic-safe refactoring workflows—especially rename planning, validation, and the integration hooks required for hot reload—with an explicit priority on speed, low overhead, and fast edit-to-reload turnaround. Every change must be as performant or more performant than the previous state, avoiding additional analysis passes, graph walks, or bookkeeping that increase steady-state or incremental cost.
        Keep scope small and strictly focused on refactoring behavior that directly impacts hot reload correctness or latency. Coordinate with the semantic and transpiler packages only where necessary, and prefer reusing existing semantic data, compiler infrastructure, or runtime capabilities rather than introducing parallel logic.
        Add targeted, low-cost tests that lock in refactoring behavior and hot-reload integration without materially slowing the test suite or expanding the surface area of the refactoring system.
