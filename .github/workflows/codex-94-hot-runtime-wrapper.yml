name: Codex 94 â€“ Runtime Wrapper Upgrades

on:
  repository_dispatch:
    types: [run_scheduled]
  - cron: "5 1/5 * * *" # Every 5 hours starting at 01:05 UTC (offset ~60 mins)
  workflow_dispatch: {}

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    if: ${{ (github.event_name == 'workflow_dispatch' || (github.event_name == 'repository_dispatch' && github.event.action == 'run_scheduled' && github.event.client_payload.workflow_file == '.github/workflows/codex-94-hot-runtime-wrapper.yml')) }}
    uses: ./.github/workflows/_codex-hot-feature-base.yml
    secrets: inherit
    with:
      component: "runtime wrapper (src/runtime-wrapper)"
      extra_context: >
        Drive incremental improvements to the browser-side hot reload wrapper: WebSocket patch
        handling, registry lifecycle management, instrumentation, or integration tests that
        exercise patch application. Keep changes decoupled from the transpiler while ensuring
        the hooks line up with the live reloading concept document.
