name: "Agent 100 - Overly Specific Functionality"
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Tune Overly Specific Behavior"
      prompt: >
        Review the repository to identify one implementation that is narrowly coded to satisfy a specific test case rather than the intended domain behavior, focusing on cases where the logic is overly constrained within the set of valid, realistically possible inputsâ€”not on adding support for inputs that are explicitly out of scope, undefined, or impossible by specification (for example, do not add case-insensitive handling for built-in functions that have a defined, case-sensitive name). For the selected case, name the function or module, cite exact file and line ranges, and identify the test or tests the implementation appears tailored to, explaining which valid inputs or scenarios are unnecessarily excluded or mishandled. Describe the assumptions baked into the current logic and why they are overly restrictive given the problem domain or API intent, then clearly state what the correctly generalized behavior should be. Refactor or generalize the implementation so it supports the broader, legitimate input space while preserving existing behavior and keeping the solution minimal and idiomatic to the codebase. Ensure all existing tests still pass, and add or extend at least one test that would have failed under the original implementation but passes under the generalized version, citing the test and explaining what broader expectation it proves. Conclude with a concise summary describing the original overly specific behavior, how the change generalizes it without supporting extraneous or never-possible scenarios, and how the new behavior was verified through tests, without changing public APIs, deleting existing tests, or introducing unnecessary special-case branching.