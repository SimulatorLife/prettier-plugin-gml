name: "Agent 23 - Lint Fixes"
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Lint Fixes"
      prompt: >
        Run `pnpm run lint` and parse its output. Identify all ESLint warnings and errors, then select
        one focused class of issues to fix (for example, all instances of the same rule violation 
        within a single file or function): focus on the selected/targeted area rather than
        project-wide formatting. Prioritize errors over warnings. Your goal is to make a small,
        correct, and safe code change that resolves that particular ESLint rule violation without
        introducing new ones. Do not refactor, reformat, or modify configuration files unless
        absolutely required by the rule itself. When selecting which issues to fix, prefer ones that are
        deterministic, locally fixable, and least likely to alter runtime behavior. Once selected,
        explain briefly what the problems are and why your fixes satisfy the ESLint rule(s).
        After applying the fixes, re-run `pnpm run lint` to confirm that the specific issues are resolved
        and that the total number of warnings/errors has decreased. If the changes affect logic,
        include a short explanation of why behavior is preserved. Provide a concise sumary message
        describing the rules fixed and files/functions updated. Never disable a lint rule, and never
        make stylistic changes beyond the targeted fixes.
