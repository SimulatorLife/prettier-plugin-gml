name: Codex 96 – Transpiler Development

on:
  repository_dispatch:
    types: [run_scheduled]
  - cron: "5 3/5 * * *" # Every 5 hours starting at 03:05 UTC (offset ~3 hours)
  workflow_dispatch: {}

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    if: ${{ (github.event_name == 'workflow_dispatch' || (github.event_name == 'repository_dispatch' && github.event.action == 'run_scheduled' && github.event.client_payload.workflow_file == '.github/workflows/codex-96-hot-transpiler.yml')) }}
    uses: ./.github/workflows/_codex-hot-feature-base.yml
    secrets: inherit
    with:
      component: "transpiler (src/transpiler)"
      extra_context: >
        Implement incremental pieces of the GML → JavaScript emitter/transpiler pipeline—AST visitors,
        lowering helpers, or patch serialization—while keeping semantics aligned with the
        runtime wrapper expectations. Introduce tests that lock in emitted code behavior.
