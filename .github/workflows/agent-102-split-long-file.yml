name: "Agent 102 - Long File Split"
on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-open-pr-and-ping.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      pr_title: "Agent: Long File Split"
      prompt: >-
        Identify a **single lengthy source file (over 1000 lines)** that can be split or refactored to improve clarity and maintainability. Your investigation must include:
        - Measuring/confirming the file's line count and explaining why its size is harmful (hard to reason about, slows builds, etc.);
        - Choosing a concrete refactoring/split strategy (e.g., extract a module, reorganize functions, break into multiple files) that keeps behavior unchanged;
        - Implementing the split/refactor by creating new files or reorganizing exports/imports without introducing new features;
        - Running relevant tests or linters to ensure nothing breaks after the split.

        The pull request should describe the selected file, its line count, the chosen refactor plan, and demonstrate that the refactor keeps functionality intact. Do not touch other files or areas unrelated to the long-file refactor.
