name: "Agent 96 – Transpiler Development"

on:
  workflow_dispatch:
    inputs:
      agent:
        description: "Optional agent override."
        required: false
        default: ""
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_agent-hot-feature-base.yml
    secrets: inherit
    with:
      agent: ${{ inputs.agent }}
      component: "transpiler (src/transpiler)"
      extra_context: >
        Implement incremental pieces of the GML → JavaScript emitter/transpiler pipeline with an explicit priority on compile speed, minimal output overhead, and fast hot-reload iteration. Every change must be as performant or more performant than the previous state, avoiding additional passes, abstractions, or emitted code that increase compile time, bundle size, or runtime cost.
        Focus on narrowly scoped additions such as AST visitors, lowering helpers, or patch serialization that are strictly required to support hot reload, and avoid implementing functionality that can be delegated to the existing JavaScript/HTML5 runtime or browser APIs. Keep emitted semantics tightly aligned with runtime wrapper expectations, favoring the simplest correct lowering.
        Introduce focused, low-overhead tests that lock in emitted code behavior and semantics without materially slowing the test suite or encouraging feature creep.
