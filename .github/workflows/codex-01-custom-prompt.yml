name: Codex 01 â€“ Custom Prompt

on:
  workflow_dispatch:
    inputs:
      custom_feature_prompt:
        description: "Describe the custom feature you want Codex to implement"
        required: true
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    uses: ./.github/workflows/_codex-open-pr-and-ping.yml
    secrets: inherit
    with:
      pr_title: "Codex: Implement custom feature"
      pr_body: |
        Seed PR for **Codex** to implement a custom feature.

      prompt: >
        Implement the following feature request in a safe, minimal, and well-tested way. If any ambiguity 
        exists, resolve it with in-code comments and choose the least risky interpretation. Avoid 
        large rewrites; keep the change set as small as possible while fully delivering the 
        requested behavior. Add or update tests to cover the new behavior without reducing coverage. 
        Update documentation or inline comments where helpful.
        
        ${{ inputs.custom_feature_prompt }}
