name: Codex 93 â€“ Refactor Engine Enhancements

on:
  repository_dispatch:
    types: [run_scheduled]
  - cron: "5 */5 * * *" # Every 5 hours at minute 5
  workflow_dispatch: {}

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  run:
    if: ${{ (github.event_name == 'workflow_dispatch' || (github.event_name == 'repository_dispatch' && github.event.action == 'run_scheduled' && github.event.client_payload.workflow_file == '.github/workflows/codex-93-hot-refactor.yml')) }}
    uses: ./.github/workflows/_codex-hot-feature-base.yml
    secrets: inherit
    with:
      component: "refactor engine (src/refactor)"
      extra_context: >
        Focus on expanding the semantic-safe refactoring workflows, especially rename planning,
        validation, and integration hooks needed for hot reload. Coordinate with the semantic
        and transpiler packages where necessary, add targeted tests, and keep scope small but
        meaningful.
